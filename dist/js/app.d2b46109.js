(function(t){function e(e){for(var i,d,r=e[0],u=e[1],c=e[2],l=0,m=[];l<r.length;l++)d=r[l],n[d]&&m.push(n[d][0]),n[d]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);a&&a(e);while(m.length)m.shift()();return s.push.apply(s,c||[]),o()}function o(){for(var t,e=0;e<s.length;e++){for(var o=s[e],i=!0,r=1;r<o.length;r++){var u=o[r];0!==n[u]&&(i=!1)}i&&(s.splice(e--,1),t=d(d.s=o[0]))}return t}var i={},n={app:0},s=[];function d(e){if(i[e])return i[e].exports;var o=i[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,d),o.l=!0,o.exports}d.m=t,d.c=i,d.d=function(t,e,o){d.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},d.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},d.t=function(t,e){if(1&e&&(t=d(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(d.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)d.d(o,i,function(e){return t[e]}.bind(null,i));return o},d.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return d.d(e,"a",e),e},d.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},d.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],u=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var a=u;s.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";var i=o("64a9"),n=o.n(i);n.a},"3dfb":function(t,e,o){"use strict";var i=o("f72d"),n=o.n(i);n.a},"51af":function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);o("cadf"),o("551c"),o("f751"),o("097d");var i=o("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("img",{attrs:{alt:"Vue logo",src:o("cf05")}}),i("TodoList")],1)},s=[],d=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"todo__list"},[o("h3",[t._v("TODO List")]),o("div",{staticClass:"todo__add"},[o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.newTitle,expression:"newTitle",modifiers:{trim:!0}}],attrs:{placeholder:"New To-Do",type:"text"},domProps:{value:t.newTitle},on:{input:function(e){e.target.composing||(t.newTitle=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.newTime,expression:"newTime"}],attrs:{placeholder:"Time",type:"number"},domProps:{value:t.newTime},on:{input:function(e){e.target.composing||(t.newTime=e.target.value)}}}),o("button",{attrs:{type:"button"},on:{click:t.addTodo}},[t._v("Add")])]),o("div",{staticClass:"todo__filters"},[o("button",{attrs:{type:"button"},on:{click:function(e){t.filter="all"}}},[t._v("All")]),o("button",{attrs:{type:"button"},on:{click:function(e){t.filter="active"}}},[t._v("Active")]),o("button",{attrs:{type:"button"},on:{click:function(e){t.filter="completed"}}},[t._v("Completed")])]),o("ul",{staticClass:"list"},[o("draggable",{attrs:{move:t.isMovable,options:{draggable:".todo--draggable",group:"todos"}},model:{value:t.todos,callback:function(e){t.todos=e},expression:"todos"}},t._l(t.filteredTodos,function(e,i){return o("ToDo",{key:e.id,class:"todo__num-"+i,attrs:{todo:e,idCounter:t.idCounter},on:{incId:t.incId,nodrag:t.cancelDraggable,drag:t.allowDraggable,confirmRemove:t.confirmRemoveTodo,remove:t.removeTodo}})}),1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:t.todos.length>0,expression:"todos.length > 0"}],staticClass:"todo__control"},[o("button",{attrs:{type:"button"},on:{click:t.saveTodoStorage}},[t._v("SAVE")]),o("button",{attrs:{type:"button"},on:{click:t.clearTodoStorage}},[t._v("CLEAR")]),o("button",{attrs:{type:"button"},on:{click:t.logTodos}},[t._v("TODOS")])])])},r=[],u=(o("20d6"),o("59ad")),c=o.n(u),a=o("a8db"),l=o("7618"),m=(o("ac6a"),o("a745")),h=o.n(m),f=(o("55dd"),o("f499")),p=o.n(f),g=o("e814"),T=o.n(g),b=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("li",{staticClass:"todo",class:{"todo--draggable":t.isDraggable,"todo--completed":t.isCompleted}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.todo.completed,expression:"todo.completed"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.todo.completed)?t._i(t.todo.completed,null)>-1:t.todo.completed},on:{change:[function(e){var o=t.todo.completed,i=e.target,n=!!i.checked;if(Array.isArray(o)){var s=null,d=t._i(o,s);i.checked?d<0&&t.$set(t.todo,"completed",o.concat([s])):d>-1&&t.$set(t.todo,"completed",o.slice(0,d).concat(o.slice(d+1)))}else t.$set(t.todo,"completed",n)},t.onCompletedChange]}}),o("div",{directives:[{name:"show",rawName:"v-show",value:!t.isEditing,expression:"!isEditing"}],staticClass:"normal"},[o("button",{directives:[{name:"show",rawName:"v-show",value:t.hasSubTodos(),expression:"hasSubTodos()"}],attrs:{type:"button"},on:{click:function(e){t.showSubTodos=!t.showSubTodos}}},[t._v("H")]),o("label",{on:{dblclick:function(e){return t.editTodo("title")}}},[t._v(t._s(""+t.todo.title))]),o("label",{directives:[{name:"show",rawName:"v-show",value:t.time,expression:"time"}],on:{dblclick:function(e){return t.editTodo("time")}}},[t._v(t._s(": "+t.time+"h"))]),o("button",{attrs:{type:"button"},on:{click:t.addTodo}},[t._v("Add")]),o("button",{attrs:{type:"button"},on:{click:t.editTodo}},[t._v("Edit")]),o("button",{attrs:{type:"button"},on:{click:function(e){return t.$emit("confirmRemove",t.todo.id)}}},[t._v("X")])]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.isEditing,expression:"isEditing"}],staticClass:"edit"},[o("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.newTitle,expression:"newTitle",modifiers:{trim:!0}},{name:"todo-focus",rawName:"v-todo-focus",value:t.isEditing&&"title"==t.editFocused,expression:"isEditing && editFocused == 'title'"}],attrs:{placeholder:"New To-Do",type:"text"},domProps:{value:t.newTitle},on:{blur:[t.editBlur,function(e){return t.$forceUpdate()}],focus:function(e){t.editFocused="title"},keyup:[function(e){return"keyCode"in e&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.finishEditTodo(e)},function(e){return"keyCode"in e&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.cancelEditTodo(e)}],input:function(e){e.target.composing||(t.newTitle=e.target.value.trim())}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.newTime,expression:"newTime"},{name:"todo-focus",rawName:"v-todo-focus",value:t.isEditing&&"time"==t.editFocused,expression:"isEditing && editFocused == 'time'"}],attrs:{placeholder:"Time",type:"number",readonly:t.hasSubTodos()},domProps:{value:t.newTime},on:{blur:t.editBlur,focus:function(e){t.editFocused="time"},keyup:[function(e){return"keyCode"in e&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.finishEditTodo(e)},function(e){return"keyCode"in e&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.cancelEditTodo(e)}],input:function(e){e.target.composing||(t.newTime=e.target.value)}}}),o("button",{attrs:{type:"button"},on:{click:t.finishEditTodo}},[t._v("Ok")]),o("button",{attrs:{type:"button"},on:{click:t.cancelEditTodo}},[t._v("X")])]),o("ul",{directives:[{name:"show",rawName:"v-show",value:t.showSubTodos,expression:"showSubTodos"}],staticClass:"subTodos"},[o("draggable",{attrs:{move:t.isMovable,options:{draggable:".todo--draggable",group:"todos"}},model:{value:t.todo.subTodos,callback:function(e){t.$set(t.todo,"subTodos",e)},expression:"todo.subTodos"}},t._l(t.orderedSubTodos,function(e,i){return o("ToDo",{key:e.id,class:"todo__num-"+i,attrs:{todo:e,idCounter:t.idCounter},on:{incId:function(e){return t.$emit("incId")},nodrag:t.cancelDraggable,drag:t.allowDraggable,completedChange:t.checkCompleted,confirmRemove:t.confirmRemoveTodo,remove:t.removeTodo}})}),1)],1)])},v=[],w=(o("6762"),o("2fdb"),o("c5f6"),o("1516")),y=o.n(w),C={name:"ToDo",components:{ToDo:S,draggable:y.a},props:{todo:Object,idCounter:Number},data:function(){return{newTitle:this.todo.title,newTime:this.todo.time,isEditing:!1,isDraggable:!0,isCompleted:this.todo.completed,editFocused:"title",showSubTodos:!this.todo.completed}},computed:{orderedSubTodos:function(){return this.todo.subTodos.sort(function(t,e){return t.completed===e.completed?0:e.completed?-1:1})},time:function(){if(!this.hasSubTodos())return this.todo.time;var t=this.todo.subTodos.every(function(t){return!isNaN(t.time)&&t.time>0});return t?this.todo.subTodos.reduce(function(t,e){return t+c()(e.time)},0):""}},watch:{isEditing:function(t){t?this.cancelDraggable():this.allowDraggable()},"todo.time":function(){this.$emit("timeChange")},"todo.subTodos.length":function(){this.calculateTime(),this.checkCompleted()}},methods:{addTodo:function(){var t=this.getNewTime(),e={id:this.newId(),title:"",time:t,completed:!1,isEditing:!0,subTodos:[]};this.showSubTodos=!0,this.todo.subTodos.push(e)},newId:function(){return this.$emit("incId"),this.idCounter},onCompletedChange:function(){var t=this.todo.completed;this.$emit("completedChange"),this.completeChildTodos(t)},calculateTime:function(){this.todo.time=this.getTotalSubTodosTime()},getTotalSubTodosTime:function(){if(!this.hasSubTodos())return this.todo.time;var t=this.todo.subTodos.reduce(function(t,e){return t+c()(e.time)},0);return t},checkCompleted:function(){this.todo.completed=this.allSubTodosCompleted(),this.$emit("completedChange")},allSubTodosCompleted:function(){return this.hasSubTodos()?this.todo.subTodos.every(function(t){return!0===t.completed}):this.todo.completed},completeChildTodos:function(t){this.hasSubTodos()&&this.todo.subTodos.forEach(function(e){e.completed=t,e.el.completeChildTodos(t)})},getNewTime:function(){return this.hasSubTodos()?this.todo.time-this.getTotalSubTodosTime():this.todo.time},isMovable:function(t){return!t.draggedContext.element.isEditing},hasSubTodos:function(){return this.getSubTodosCount()>0},getSubTodosCount:function(){return this.todo.subTodos.length},cancelDraggable:function(){this.isDraggable=!1,this.$emit("nodrag")},allowDraggable:function(){this.isDraggable=!0,this.$emit("drag")},confirmRemoveTodo:function(t){window.confirm("Are you sure?")&&this.removeTodo(t)},removeTodo:function(t){var e=this.todo.subTodos.findIndex(function(e){return e.id===t});this.todo.subTodos.splice(e,1)},editTodo:function(t){"time"===t&&this.hasSubTodos()||(["title","time"].includes(t)||(t="title"),this.editFocused=t,this.setEditing(!0),this.newTitle=this.todo.title,this.cachedTitle=this.todo.title,this.cachedTime=this.todo.time)},cancelEditTodo:function(){if(this.editBlurTimeoutRunning)return clearTimeout(this.editBlurTimeout),this.editBlurTimeoutRunning=!1,this.newTitle=this.cachedTitle,void this.finishEditTodo();this.cachedTitle&&0!==this.cachedTitle.length?(this.todo.title=this.cachedTime,this.todo.title=this.cachedTitle,this.setEditing(!1)):this.$emit("remove",this.todo.id)},editBlur:function(){var t=this;this.editBlurTimeoutRunning=!0,this.editFocused="",this.editBlurTimeout=setTimeout(function(){["title","time"].includes(t.editFocused)||(t.finishEditTodo(),t.editBlurTimeoutRunning=!1)},300)},finishEditTodo:function(){if(this.isEditing){var t=this.newTitle&&this.newTitle.trim(),e=c()(this.newTime),o=isNaN(e)?0:e;t&&0!==t.length?(this.todo.title=t,this.todo.time=o,this.setEditing(!1)):this.$emit("remove",this.todo.id)}},setEditing:function(t){this.isEditing=t,this.todo.isEditing=t}},mounted:function(){this.todo.isEditing&&(this.isEditing=this.todo.isEditing),this.todo.el=this},directives:{"todo-focus":function(t,e){e.value&&t.focus()}}},E=C,_=(o("9da5"),o("2877")),k=Object(_["a"])(E,b,v,!1,null,"34141ea0",null),S=k.exports,x={id:0,title:"Tosdos",time:0,completed:!1,subTodos:[]},D={getTodos:function(){var t=JSON.parse(localStorage.getItem("todos"))||[x];return t},getIdCounter:function(){return T()(localStorage.getItem("idCounter"))||0},save:function(t,e){localStorage.setItem("todos",p()(t)),localStorage.setItem("idCounter",e)},clear:function(){localStorage.clear()}},N={all:function(t){return t.sort(function(t,e){return t.completed===e.completed?0:e.completed?-1:1})},active:function(t){return t.filter(function(t){return!t.completed})},completed:function(t){return t.filter(function(t){return t.completed})}},O={components:{ToDo:S,draggable:y.a},data:function(){return{todos:D.getTodos(),idCounter:D.getIdCounter(),newTitle:"",newTime:"",filter:"all"}},computed:{filteredTodos:function(){return N[this.filter](this.todos)}},methods:{saveTodoStorage:function(){var t=o(this.todos),e=this.idCounter;function o(t){var e=[];if(h()(t)&&0!==t.length)t.forEach(function(t){e.push(o(t))});else if("object"===Object(l["a"])(t)&&t.constructor===Object){t.el,t.isEditing;var i=Object(a["a"])(t,["el","isEditing"]);return i.subTodos=o(t.subTodos),i}return e}D.save(t,e)},clearTodoStorage:function(){confirm("Are you sure?")&&(D.clear(),this.todos=[])},incId:function(){this.idCounter++},addTodo:function(){var t=this.newTitle,e=c()(this.newTime),o=isNaN(e)?0:e,i={id:this.newId(),title:t,time:o,completed:!1,isEditing:!0,subTodos:[]};this.todos.push(i)},logTodos:function(){console.log("TODOS",this.todos)},newId:function(){return this.incId(),this.idCounter},isMovable:function(t){return!t.draggedContext.element.isEditing},cancelDraggable:function(){this.isDraggable=!1},allowDraggable:function(){this.isDraggable=!0},confirmRemoveTodo:function(t){window.confirm("Are you sure?")&&this.removeTodo(t)},removeTodo:function(t){var e=this.todos.findIndex(function(e){return e.id===t});this.todos.splice(e,1)}}},$=O,I=(o("3dfb"),Object(_["a"])($,d,r,!1,null,"20084892",null)),j=I.exports,A={name:"app",components:{TodoList:j}},R=A,P=(o("034f"),Object(_["a"])(R,n,s,!1,null,null,null)),F=P.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(F)}}).$mount("#app")},"64a9":function(t,e,o){},"9da5":function(t,e,o){"use strict";var i=o("51af"),n=o.n(i);n.a},cf05:function(t,e,o){t.exports=o.p+"img/logo.82b9c7a5.png"},f72d:function(t,e,o){}});
//# sourceMappingURL=app.d2b46109.js.map